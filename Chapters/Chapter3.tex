% A note on what is COMSOL.
COMSOL Multiphysics\textsuperscript{TM} is a comprehensive software suite for finite element analysis, solving, and simulation across a wide array of physics and engineering disciplines, particularly focusing on coupled phenomena and multiphysics interactions. It enables the creation and simulation of physics-based models and applications in an intuitive, interactive workspace.

COMSOL software supports a broad spectrum of applications, from electromagnetics and structural mechanics to acoustics, fluid dynamics, heat transfer, and chemical engineering. COMSOL features an extensive array of modules, including the Wave Optics module for optical applications simulations like wave propagation in fiber optics and photonics, the Semiconductor module for the analysis of semiconductor devices such as diodes and transistors, and the AC/DC module for examining electric and magnetic fields in static and low-frequency scenarios. For my thesis, which involves analyzing ray paths in optical systems, I will be utilizing the Ray Optics module.

% ----- THE MODELLING WORKFLOW -----
\section{The COMSOL Modelling Workflow}
Briefly the modelling workflow consists of the following steps, if you start a model completely from scratch:
\begin{enumerate}
    \item Setting up the model environment
    \item Building the geometry
    \item Specifying material properties
    \item Defining physics boundary conditions
    \item Creating the mesh
    \item Running the simulation
    \item Post-processing the results
\end{enumerate}

To do this, I shall work through the modelling workflow on a small sample project that'll showcase the power of COMSOL alongside the ease of using the modelling workflow to build all of your projects. Please note that the modelling workflow is the same no matter what physics one is attempting to model hence the modelling workflow will inform the rest of the models I shall create for my thesis too.

Specifically, I shall walk you through modelling Joule heating in a busbar. One passes an electric current through metal which heats up because of the resistance to the electric current flow.

Our busbar will contain three titanium bolts. We are conducting a current from the single bolt on one side of the busbar to the pair of bolts on the other end of the busbar. The goal is to see the temperature distribution as the busbar heats up.

% TODO: Add the busbar image

% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

% SUBSECTION --- Setting up the model environment ---
\subsection{Setting Up the Model Environment}.
% TODO: Add set-up screen image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

One you click on the COMSOL icon, you will be prompted to choose whether you want to start from scratch (choosing a Blank Model) or the Model Wizard, a guided approach which allows you to make prepared selections as part of your model setup which is recommended. The Blank Model allows you to go directly to the working environment, the COMSOL desktop, without making any pre-selections as you would if you chose the Model Wizard.

% TODO: Add "Select Space Dimension" image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

Since our busbar model is three-dimensional, we choose the "3D" option.

% TODO: Add "Select Physics" image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

Next, we encounter the page that prompts you to select the type of Physics you would like to model. Since we're dealing with Joule heating, we select it. However, say you want to investigate thin-film fluid flow, you would go to the "Fluid Flow" node and select the "Thin-Film Flow" under it. Notice that once we add the "Joule Heating" physics, it is accompanied by other types of physics such as "Electric Currents (ec)" and "Heat Transfer in Solids (ht)". This is because "Joule Heating" is a coupled interface meaning it has multiple Physics bundled up into one.

Ultimately the choice of Physics you would like to investigate depends on the nature of your project and the tier of the COMSOL subscription you have. Indeed, I had to wait a couple of weeks before I got the "Ray Optics" package I needed for my thesis since my initial subscription did not come with it. So, it is prudent to check which type of Physics you need for your project early on.

Once you're ready, we click on "Study" to continue.

% TODO: Add "Select Study" image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

In this window, we encounter a list of studies that are available based on the previous choices we made for the spatial dimension and the physics of our model. For the busbar, we only need the "Stationary" study since we are conducting a stationary study. Once we click "Done", we move on to the COMSOL desktop.

% TODO: Add "COMSOL Desktop" image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

The COMSOL desktop is the staging area where you will build and interact with your model from scratch. It intuitively contains buttons or ribbons to the order of the modelling workflow. The Model Builder window contains the modelling tree where you can, for example, specify your model's dimensions including specifying particular physics equations your model should abide by. You can re-order the COMSOL desktop's windows depending on your preferences too.

% SUBSECTION --- Building the Geometry ---
\subsection{Building the Geometry}.
You have various options when it comes to building your model's geometry. First, you could use COMSOL's drawing tools or shape options. You can also import a geometry from an external file.

% TODO: Add "Geometry Ribbon" image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

For our case, since the busbar is already made and within COMSOL's geometry library, all we have to do is access this library of pre-made model geometries. To do this, go to File and then select Application Libraries.

% TODO: Add image containing "application libraries" selection
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

Select the COMSOL Multiphysics branch and do the same for the Multiphysics section. We can then select 'busbar\_geom' and then click Open and then save your file.

% TODO: Add "Application Libraries" image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

The geometry will now be in the Graphics window where you can zoom in and out as well as examine it by moving it around. Notice that the Geometry node in the Model Builder window has changed signifying the steps that it took to create the busbar geometry. Moreover, upon further examination, we see that parameters have been used to create this particular geometry. You can find these parameters in the Parameters 1 node which contains a table which lists the editable parameters used to create the geometry.

% TODO: Add image after when you add default busbare geom to model
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

% SUBSECTION --- Specifying the Material Properties ---
\subsection{Specifying the Material Properties}.

Since our busbar should contain different parts with different materials, we should first make selections of the parts and then assign them the required material in batches instead of one by one. To make the selections, we go to the Definitions tab and click on Explicit.

% TODO: Add explicit choice selection from Definitions tab
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

Next we go to the Graphics window and select the bolts making sure to select the front and back-facing parts of the bolts in the busbar. The reason we're doing this is because the bolts will have a different material from the rest of the busbar parts.

% TODO: Add bolt selections after selections
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{ Source: \cite{}}
%   \label{}
% \end{figure}

Next comes adding the materials. Navigate to the Materials ribbon and choose the Add Materials option. Upon doing this, a new "Add Material" window will appear where we can choose our preferred material.

% TODO: Add the Add Materials image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}

Choose the Built-In node and select the Titanium (for the bolts) and Copper materials.

% TODO: Add the Add Materials window image
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}

The Bolts selections definition we made earlier comes in handy when we assign every bolt to the Titanium material by choosing the Bolts selection as shown below

% TODO: Add the bolts for titanium material selection
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}

With each material addition, and thus, material node addition in the Model Builder window comes a table in the Settings window of the Material Contents which contain the physical properties of said materials, such as, Electrical Conductivity, Heat Capacity, among others.

% TODO: Add image showing material contents (properties)
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}


% SUBSECTION --- Defining the Physics Boundary Conditions ---
\subsection{Defining the Physics Boundary Conditions}.
We can now start assigning mathematical equations to different parts of our geometry or model in order to simulate our Physics and we do this by selecting parts of the geometry and then specifying appropriate equations and physical conditions that describe that part.

Let's start by configuring the Physics for the electric currents interface which will simulate the conduction of electric current from the single bolt to the pair of bolts on the other end of the busbar. Depending on the Physics you selected when setting up the model environment, some equations may be built-in to your Physics nodes, for instance, if you navigate to the "Electric Currents (ec)" node, you can see the corresponding equations detailed in the Settings window. One of the equations is the ubiquitous equation relating the electric field to the electric potential, $\mathbf{E} = -\nabla V$.

% TODO: Add image showing equation
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}

So there's no black box in COMSOL Multiphysics since the user can always know what COMSOL Multiphysics is doing and how.

When we added the physics to our model, this also included a few default nodes under each respective physics nodes and we only add the boundary conditions and constraints to our model when they are different from these default nodes. So for instance, for the "Electric Currents (ec)" Physics, you have default boundary conditions such as "Electric Insulation 1" which is default and applied to all boundaries. This is not valid for the case of our model.

We want to apply a voltage to the the bottom surface of the single bolt. To do this, we click on the Physics tab, click Boundaries, and select Electric Potential and upon selecting it, you'll see an Electric Potential 1 node was added. We now need to select the select the piece of geometry this potential applies to, and as stated before, we hover over the surface we want to select and click it. For the value of electric potential, we want to apply a voltage of 20 mV, to which you enter as 20[mV] where the brackets specify the units if different from the default.

To make your life easier though, recall that in the Parameters table in the "Parameters 1" node, we have a variable Vtot, that included the value for the applied voltage so instead of manually writing 20[mV], you could just type the variable name. Doing this will allow you to set up a parametric study later on.

Lastly, we want to include a ground boundary condition to the bottom surface of each pair of bolts on the other side of the busbar. To do this, we can click the boundaries button in the Physics tab and select Ground and select the appropriate parts of the geometry.

% TODO: Add image showing "Electric Currents" boundary conditions
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}

Since the Joule Heating physics option we selected was a coupled one, we also need to specify the boundary conditions for the thermal portion of our model. Again, here the "Thermal Insulation 1" boundary condition is applied to all part of our model which is not valid in our case. Navigate to the Physics tab then Boundaries, and then select Heat Flux. In the settings window, in the Boundary Selection option, select, "All Boundaries" and omit all the bolt surfaces we selected earlier for the Electric Currents boundary conditions, that is, boundaries 8, 15, and 43. You can do this by selecting these boundary numbers and clicking on the minus sign which is "Remove from Selection".

Under the Heat Flux section, we're going to select the "Convective heat flux" option under "Flux Type" and we want to enter a value of 5 $W/(m^2\cdot K)$. But like we did for the electric potential, we just refer back to the Parameters 1 node, and type in htc which specifies the value of 5 $W/(m^2\cdot K)$.

% TODO: Add image showing "Electric Currents" boundary conditions
% \begin{figure}[ht!]
%   \centering
%   \includegraphics[width=0.4\textwidth]{}
%   \caption{Source: \cite{}}
%   \label{}
% \end{figure}

In this model of a busbar, both of the Physics we've included, Electric Currents and Heat Transfer in solids, are active everywhere.

% SUBSECTION --- Build the Mesh ---
\subsection{Build the Mesh}.